<% layout('layouts/boilerplate') -%>
<div id="map" class="h-[40vh] rounded-lg"></div>

<h1 class="mb-4 mt-4 text-3xl font-bold">All Campgrounds</h1>
<%- include("../partials/searchInput.ejs") %> <% for (let campground of
campgrounds) { %>
<div
  class="mb-2 flex h-48 min-w-full gap-x-4 overflow-hidden rounded-md border border-gray-200 shadow-lg"
>
  <% if(campground.images.length){ %>
  <img
    src="<%= campground.images[0].url %>"
    class="aspect-video w-1/3 object-cover"
  />
  <% } else { %>
  <img
    src="https://www.seeksophie.com/_next/static/media/default.0346989b.jpeg"
    class="aspect-video w-1/3 object-cover"
  />
  <% } %>
  <div class="w-2/3 py-2">
    <p class="text-lg font-semibold"><%= campground.title %></p>
    <p class="mb-4s text-sm"><%= campground.description %></p>
    <p class="mb-4 text-sm text-gray-400"><%= campground.location %></p>
    <a
      href="/campgrounds/<%= campground._id %>"
      class="rounded-md bg-blue-600 px-2 py-1 text-sm text-white"
      >View <%= campground.title %></a
    >
  </div>
</div>
<% } %>

<script>
  const mapToken = "<%-process.env.MAPBOX_TOKEN%>";
  const campgrounds = {features: <%-JSON.stringify(campgrounds)%>};
</script>
<script src="/javascripts/clusterMap.js"></script>
